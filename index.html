<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="ุฑุงุฆุฏ - ุญููู ุฑูููุฉ ูุชูุงููุฉ ูุชุทููุฑ ุญุถูุฑู ูุฒูุงุฏุฉ ูุจูุนุงุชู">
    <title>ุฑุงุฆุฏ | Raed - ุญููู ุฑูููุฉ</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="cart.css">
    <link rel="stylesheet" href="auth.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <!-- Netlify Identity Widget - ูููุญุฉ ุงูุชุญูู -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>

    <!-- ุณูุฑุจุช ููุชุนุงูู ูุน ุชุณุฌูู ุงูุฏุฎูู -->
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
    <!-- ========== GALAXY BACKGROUND ========== -->
    <div class="galaxy-bg" aria-hidden="true">
        <div class="stars" id="stars"></div>
        <div class="nebula nebula-1"></div>
        <div class="nebula nebula-2"></div>
        <div class="glow-orb glow-orb-1"></div>
        <div class="glow-orb glow-orb-2"></div>
        <!-- Background floating logo -->
        <div class="bg-logo-float">
            <img src="https://f.top4top.io/p_3673r6nw21.png" alt="" />
        </div>
    </div>

    <!-- ========== MENU TOGGLE (TOP RIGHT) ========== -->
    <button class="menu-toggle" id="menuToggle" aria-label="ูุชุญ ุงููุงุฆูุฉ">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- ========== USER MENU (TOP LEFT) ========== -->
    <div id="userMenu" class="user-menu" style="display: none;">
        <button id="userMenuBtn" class="user-menu-btn">
            <i class="fas fa-user-circle"></i>
        </button>
        <div id="userDropdown" class="user-dropdown">
            <div class="user-info">
                <span id="userName">ูุฑุญุจุงู</span>
                <span id="userEmail" class="user-email"></span>
            </div>
            <div class="dropdown-divider"></div>
            <a href="profile.html" class="dropdown-item">
                <i class="fas fa-user"></i>
                ูุนูููุงุชู
            </a>
            <a href="orders.html" class="dropdown-item">
                <i class="fas fa-shopping-bag"></i>
                ุทูุจุงุชู
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" id="logoutBtn" class="dropdown-item logout">
                <i class="fas fa-sign-out-alt"></i>
                ุชุณุฌูู ุงูุฎุฑูุฌ
            </a>
        </div>
    </div>

    <!-- ========== FLOATING CART BUTTON - HIDDEN BY DEFAULT ========== -->
    <div id="floatingCart" class="floating-cart">
        <button type="button" id="floatingCartBtn" class="floating-cart-btn" onclick="openCartDrawer()" aria-label="ุณูุฉ ุงููุดุชุฑูุงุช">
            <i class="fas fa-shopping-cart"></i>
            <span id="floatingCartCount" class="cart-count">0</span>
        </button>
    </div>

    <!-- ========== CART DRAWER - HIDDEN BY DEFAULT ========== -->
    <div class="cart-overlay" id="cartOverlay" onclick="closeCartDrawer()"></div>
    <aside class="cart-drawer" id="cartDrawer">
        <div class="cart-drawer-header">
            <h3>๐ ุณูุฉ ุงููุดุชุฑูุงุช</h3>
            <button type="button" class="close-cart" onclick="closeCartDrawer()">&times;</button>
        </div>
        <div id="cartItems" class="cart-items">
            <div class="cart-empty">
                <i class="fas fa-shopping-cart"></i>
                <p>ุงูุณูุฉ ูุงุฑุบุฉ</p>
            </div>
        </div>
        <div class="cart-footer" id="cartFooter">
            <div class="cart-total">
                <span>ุงููุฌููุน:</span>
                <span id="cartTotal">0 ุฑูุงู</span>
            </div>
            <button type="button" class="checkout-btn" onclick="proceedToCheckout()">
                <i class="fas fa-credit-card"></i>
                ุฅุชูุงู ุงูุทูุจ
            </button>
        </div>
    </aside>

    <!-- ========== SIDE MENU (FROM RIGHT) ========== -->
    <div class="menu-overlay" id="menuOverlay"></div>
    <nav class="side-menu" id="sideMenu">
        <div class="menu-header">
            <span class="menu-logo">ุฑุงุฆุฏ | Raed</span>
            <button class="menu-close" id="menuClose" aria-label="ุฅุบูุงู">โ</button>
        </div>
        <ul class="menu-links">
            <li><a href="#intro" data-stage="intro">๐ ุงูุฑุฆูุณูุฉ</a></li>
            <li><a href="#map" data-stage="map">๐บ๏ธ ุฎุฑูุทุฉ ุงููููุน</a></li>
            <li><a href="#services" data-stage="services">๐ ุงูุฎุฏูุงุช</a></li>
            <li><a href="#contact" data-stage="contact">๐ฌ ุชูุงุตู</a></li>
            <li><a href="#privacy" data-stage="privacy">๐ ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</a></li>
            <li><a href="#" id="loginBtn" class="mobile-menu-item">
                <i class="fas fa-sign-in-alt"></i>
                ุชุณุฌูู ุงูุฏุฎูู
            </a></li>
        </ul>
    </nav>

    <!-- ========== MAIN CONTENT ========== -->
    <main class="main-content" id="mainContent">

        <!-- ===== STAGE: INTRO ===== -->
        <section class="stage stage-intro is-active" id="stageIntro" data-stage="intro">
            <div class="intro-portal">
                <!-- ========== 3D SPACE LOGO ========== -->
                <div class="space-logo-3d">
                    <div class="logo-depth-layer layer-1"></div>
                    <div class="logo-depth-layer layer-2"></div>
                    <div class="logo-depth-layer layer-3"></div>
                    <div class="logo-container-3d">
                        <div class="logo-inner-glow"></div>
                        <div class="logo-outer-glow"></div>
                        <img src="https://f.top4top.io/p_3673r6nw21.png" alt="ุณูุญุฉ" class="logo-3d-img" />
                        <div class="logo-shine"></div>
                        <div class="logo-sparkles-3d">
                            <span class="sparkle-3d"></span>
                            <span class="sparkle-3d"></span>
                            <span class="sparkle-3d"></span>
                            <span class="sparkle-3d"></span>
                            <span class="sparkle-3d"></span>
                            <span class="sparkle-3d"></span>
                        </div>
                    </div>
                </div>
                
                <div class="portal-glow"></div>
                <div class="portal-frame">
                    <h1 class="logo-main">ุฑุงุฆุฏ | Raed</h1>
                    <p class="intro-bio">
                        ุฃูุง ุฑุงุฆุฏ โ ุฃูุฏูู ุญููู ุฑูููุฉ ูุชูุงููุฉ ูุชุทููุฑ ุญุถูุฑู ูุฒูุงุฏุฉ ูุจูุนุงุชู: 
                        ุชุตููู ูุชุงุฌุฑุ ุตูุญุงุช ูุจูุทุ ุญููุงุช ุฅุนูุงููุฉุ ูุฑุจุท ุฃุฏูุงุช ุงูุชุชุจุน ูุงููุงุชุณุงุจ.
                    </p>
                    <button class="btn-primary btn-enter" id="btnEnterJourney">
                        <span>ุงุจุฏุฃ ุงูุฑุญูุฉ</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- ===== STAGE: MAP ===== -->
        <section class="stage stage-map" id="stageMap" data-stage="map">
            <div class="map-container">
                <h2 class="map-title">ุฎุฑูุทุฉ ุงูุฑุญูุฉ</h2>
                
                <!-- SVG Path -->
                <svg class="map-path" viewBox="0 0 400 100" preserveAspectRatio="none">
                    <path class="path-line" d="M0,50 Q100,20 200,50 T400,50" />
                </svg>

                <!-- Portal Cards -->
                <div class="map-portals">
                    <button class="map-portal" data-target="services">
                        <div class="portal-icon">๐</div>
                        <h3 class="portal-title">ุจูุงุจุฉ ุงูุฎุฏูุงุช ุงูุฑูููุฉ</h3>
                        <p class="portal-sub">ุญููู ูุชูุงููุฉ ููุฌุงุญ ูุดุฑูุนู</p>
                    </button>

                    <button class="map-portal portal-green" data-target="contact">
                        <div class="portal-icon">๐ฌ</div>
                        <h3 class="portal-title">ุจูุงุจุฉ ุชูุงุตู ูุน ุฑุงุฆุฏ</h3>
                        <p class="portal-sub">ุงุจุฏุฃ ูุญุงุฏุซุชู ุงูุขู</p>
                    </button>
                </div>

                <button class="btn-back" data-back="intro">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    <span>ุฑุฌูุน</span>
                </button>
            </div>
        </section>

        <!-- ===== STAGE: SERVICES ===== -->
        <section class="stage stage-services" id="stageServices" data-stage="services">
            <div class="stage-container">
                <div class="stage-header">
                    <button class="btn-back" data-back="map">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        <span>ุฑุฌูุน</span>
                    </button>
                    <h2 class="stage-title">ุงูุฎุฏูุงุช ุงูุฑูููุฉ</h2>
                </div>
                <div class="cards-grid" id="servicesGrid"></div>
            </div>
        </section>

        <!-- ===== STAGE: CONTACT ===== -->
        <section class="stage stage-contact" id="stageContact" data-stage="contact">
            <div class="stage-container">
                <div class="stage-header">
                    <button class="btn-back" data-back="map">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        <span>ุฑุฌูุน</span>
                    </button>
                    <h2 class="stage-title title-green">ุชูุงุตู ูุน ุฑุงุฆุฏ</h2>
                </div>
                <div class="contact-card">
                    <div class="contact-icon">๐ฌ</div>
                    <p class="contact-intro">ุฃูุง ููุง ููุณุงุนุฏุชู ูู ุชุญููู ุฃูุฏุงูู ุงูุฑูููุฉ</p>
                    <a href="https://wa.me/966536090915?text=ูุฑุญุจุงู ุฑุงุฆุฏุ ุฃุฑูุฏ ุงูุงุณุชูุณุงุฑ ุนู ุฎุฏูุงุชู" target="_blank" rel="noopener" class="btn-whatsapp">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                        <span>ุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ</span>
                    </a>
                    <a href="mailto:raed@example.com?subject=ุงุณุชูุณุงุฑ ุนู ุงูุฎุฏูุงุช" class="btn-email">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                        <span>ุฑุงุณููู ุจุงูุฅูููู</span>
                    </a>
                    <form class="contact-form" id="contactForm">
                        <div class="form-group"><input type="text" id="formName" placeholder="ุงูุงุณู" required></div>
                        <div class="form-group"><input type="tel" id="formPhone" placeholder="ุฑูู ุงูุฌูุงู" required></div>
                        <div class="form-group"><textarea id="formMessage" placeholder="ุฑุณุงูุชู..." rows="3" required></textarea></div>
                        <button type="submit" class="btn-submit"><span>ุฅุฑุณุงู ุนุจุฑ ูุงุชุณุงุจ</span></button>
                    </form>
                </div>
            </div>
        </section>

        <!-- ===== STAGE: PRIVACY ===== -->
        <section class="stage stage-privacy" id="stagePrivacy" data-stage="privacy">
            <div class="stage-container">
                <div class="stage-header">
                    <button class="btn-back" data-back="map">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        <span>ุฑุฌูุน</span>
                    </button>
                    <h2 class="stage-title">ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</h2>
                </div>
                <div class="privacy-card">
                    <div class="privacy-section">
                        <h3>๐ ููุฏูุฉ</h3>
                        <p>ูุญู ูู "ุฑุงุฆุฏ" ูุญุชุฑู ุฎุตูุตูุชู ูููุชุฒู ุจุญูุงูุฉ ุจูุงูุงุชู ุงูุดุฎุตูุฉ. ุชูุถุญ ูุฐู ุงูุณูุงุณุฉ ููููุฉ ุฌูุน ูุงุณุชุฎุฏุงู ูุญูุงูุฉ ูุนูููุงุชู.</p>
                    </div>
                    <div class="privacy-section">
                        <h3>๐ ุงูุจูุงูุงุช ุงูุชู ูุฌูุนูุง</h3>
                        <ul><li>ุงูุงุณู ุงููุงูู</li><li>ุฑูู ุงูุฌูุงู</li><li>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</li><li>ูุญุชูู ุงูุฑุณุงุฆู ูุงูุงุณุชูุณุงุฑุงุช</li></ul>
                    </div>
                    <div class="privacy-section">
                        <h3>๐ฏ ููุงุฐุง ูุฌูุน ูุฐู ุงูุจูุงูุงุช</h3>
                        <ul><li>ููุฑุฏ ุนูู ุงุณุชูุณุงุฑุงุชู ูุทูุจุงุชู</li><li>ูุชูุฏูู ุงูุฎุฏูุงุช ุงููุทููุจุฉ</li><li>ููุชูุงุตู ูุนู ุจุฎุตูุต ูุดุงุฑูุนู</li><li>ูุชุญุณูู ุฌูุฏุฉ ุฎุฏูุงุชูุง</li></ul>
                    </div>
                    <div class="privacy-section">
                        <h3>๐ ุญูุงูุฉ ูุชุฎุฒูู ุงูุจูุงูุงุช</h3>
                        <ul><li>ูุญุชูุธ ุจุงูุจูุงูุงุช ูููุชุฑุฉ ุงูุถุฑูุฑูุฉ ููุท</li><li>ูุณุชุฎุฏู ูุณุงุฆู ุญูุงูุฉ ุขููุฉ</li><li>ุงููุตูู ููุจูุงูุงุช ูููุฏ ููุฃุดุฎุงุต ุงููุฎูููู ููุท</li></ul>
                    </div>
                    <div class="privacy-section">
                        <h3>๐ค ูุดุงุฑูุฉ ุงูุจูุงูุงุช</h3>
                        <ul><li>ูุง ูุจูุน ุจูุงูุงุชู ูุฃู ุทุฑู ุซุงูุซ</li><li>ูุฏ ูุดุงุฑู ุงูุจูุงูุงุช ูุน ููุฏูู ุฎุฏูุงุช ุถุฑูุฑููู</li><li>ููุชุฒู ุจุงูุฅูุตุงุญ ุนูุฏ ุงูุทูุจ ุงููุงูููู</li></ul>
                    </div>
                    <div class="privacy-section">
                        <h3>โ ุญูููู</h3>
                        <ul><li>ุทูุจ ุงูุงุทูุงุน ุนูู ุจูุงูุงุชู</li><li>ุทูุจ ุชุตุญูุญ ุฃู ุชุญุฏูุซ ุจูุงูุงุชู</li><li>ุทูุจ ุญุฐู ุจูุงูุงุชู</li><li>ุงูุงุนุชุฑุงุถ ุนูู ูุนุงูุฌุฉ ุจูุงูุงุชู</li></ul>
                    </div>
                    <div class="privacy-section">
                        <h3>๐ช ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท</h3>
                        <p>ูุฏ ูุณุชุฎุฏู ูููุงุช ุชุนุฑูู ุงูุงุฑุชุจุงุท (Cookies) ูุชุญุณูู ุชุฌุฑุจุฉ ุงูุชุตูุญ ูุชุญููู ุงุณุชุฎุฏุงู ุงููููุน.</p>
                    </div>
                    <div class="privacy-section">
                        <h3>๐ ููุชูุงุตู ุจุฎุตูุต ุงูุฎุตูุตูุฉ</h3>
                        <p>ูุฃู ุงุณุชูุณุงุฑุงุช ูุชุนููุฉ ุจุฎุตูุตูุชู:</p>
                        <ul><li>ูุงุชุณุงุจ: +966536090915</li><li>ุงูุจุฑูุฏ: raed@example.com</li></ul>
                    </div>
                    <div class="privacy-footer"><p>ุขุฎุฑ ุชุญุฏูุซ: ููุงูุฑ 2026</p></div>
                </div>
            </div>
        </section>

    </main>

    <!-- ========== DETAILS PANEL ========== -->
    <div class="panel-overlay" id="panelOverlay"></div>
    <div class="details-panel" id="detailsPanel">
        <div class="panel-header">
            <div class="panel-drag"></div>
            <button class="panel-close" id="panelClose">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="panel-body" id="panelBody"></div>
    </div>

    <!-- ========== PORTAL TRANSITION ========== -->
    <div class="portal-transition" id="portalTransition">
        <div class="transition-ring"></div>
        <div class="transition-ring"></div>
        <div class="transition-ring"></div>
    </div>

    <!-- ========== AUTH MODAL (EmailJS OTP) ========== -->
    <div id="authModal" class="auth-modal">
        <div class="auth-modal-content">
            <button class="close-auth-modal">&times;</button>
            
            <!-- Step 1: Email Input -->
            <div id="emailStep" class="auth-step active">
                <div class="auth-icon">๐ง</div>
                <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
                <p>ุฃุฏุฎู ุจุฑูุฏู ุงูุฅููุชุฑููู ูุณูุฑุณู ูู ุฑูุฒ ุงูุชุญูู</p>
                <div class="input-group">
                    <input type="email" id="loginEmail" placeholder="example@email.com" dir="ltr" autocomplete="email">
                </div>
                <button id="sendOtpBtn" class="auth-btn">ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู</button>
            </div>
            
            <!-- Step 2: OTP Input -->
            <div id="otpStep" class="auth-step">
                <div class="auth-icon">๐</div>
                <h2>ุฃุฏุฎู ุฑูุฒ ุงูุชุญูู</h2>
                <p>ุฃุฑุณููุง ุฑูุฒ ูููู ูู 6 ุฃุฑูุงู ุฅูู ุจุฑูุฏู</p>
                <div class="input-group">
                    <input type="text" id="otpInput" placeholder="000000" maxlength="6" dir="ltr" inputmode="numeric" class="otp-input">
                </div>
                <button id="verifyOtpBtn" class="auth-btn">ุชุญูู</button>
                <button id="resendOtpBtn" class="auth-btn-secondary">ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฑูุฒ</button>
                <button class="auth-btn-link" onclick="showStep('emailStep')">
                    <i class="fas fa-arrow-right"></i> ุชุบููุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
                </button>
            </div>
            
            <!-- Step 3: Profile Completion (New Users) -->
            <div id="profileStep" class="auth-step">
                <div class="auth-icon">๐ค</div>
                <h2>ุฃููู ุจูุงูุงุชู</h2>
                <p>ูุฑุฉ ูุงุญุฏุฉ ููุท ููุชุณุฌูู</p>
                <div class="input-group">
                    <input type="text" id="firstName" placeholder="ุงูุงุณู ุงูุฃูู">
                </div>
                <div class="input-group">
                    <input type="text" id="lastName" placeholder="ุงูุงุณู ุงูุฃุฎูุฑ">
                </div>
                <div class="input-group">
                    <input type="tel" id="phoneNumber" placeholder="05xxxxxxxx" dir="ltr" inputmode="numeric">
                </div>
                <button id="saveProfileBtn" class="auth-btn">ุญูุธ ูุงููุชุงุจุนุฉ</button>
            </div>
        </div>
    </div>

    <!-- ========== TOAST CONTAINER ========== -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- App Scripts -->
    <script src="cart.js"></script>
    <script src="auth.js"></script>
    <script src="app.js"></script>
</body>
</html>
